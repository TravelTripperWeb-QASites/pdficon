!function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,a,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,a=0;r>a;a++)c[a].apply(this,o);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(u=o;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,n){!function(e){if("function"==typeof define&&define.amd)define(e);else if("object"==typeof n)t.exports=e();else{var r=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=r,i}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,i,o){var s;if(arguments.length>1){if(o=e({path:"/"},r.defaults,o),"number"==typeof o.expires){var u=new Date;u.setMilliseconds(u.getMilliseconds()+864e5*o.expires),o.expires=u}try{s=JSON.stringify(i),/^[\{\[]/.test(s)&&(i=s)}catch(a){}return i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}t||(s={});for(var c=document.cookie?document.cookie.split("; "):[],f=/(%[0-9A-Z]{2})+/g,l=0;l<c.length;l++){var p=c[l].split("="),d=p[0].replace(f,decodeURIComponent),h=p.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{if(h=n.read?n.read(h,d):n(h,d)||h.replace(f,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(a){}if(t===d){s=h;break}t||(s[d]=h)}catch(a){}}return s}return r.get=r.set=r,r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t(function(){})})},{}],3:[function(e,t,n){function r(){return G}function i(){return D}function o(e){var t=1440,n=e/t,n=n.toFixed(3);return parseFloat(n)}function s(e){if(G=e,P=e.jQuery,"undefined"==typeof e.propertyId)throw"Missing property id";D=e.propertyId}function u(e){D=a(e)}function a(e){return e=e.length?parseInt(e):null}function c(e){return e?U.get(T):U.getJSON(T)}function f(e){return e?U.get(k):U.getJSON(k)}function l(e){return e?U.get(O):U.getJSON(O)}function p(e){U.set(k,e,{expires:G.ipExpiration})}function d(e){U.set(T,{info:e},{expires:G.portalExpiration})}function h(e){var t=c();t?(t.redirectView=e,U.set(T,t,{expires:G.portalExpiration})):U.set(T,{redirect:e},{expires:G.portalExpiration})}function v(){var e=c();return!!e.redirectView}function m(){U.remove(T),U.remove(k),U.remove(O)}function g(e){var t={propId:D};if(e){var n=o(e);U.set(O,t,{expires:n})}else U.set(O,t)}function y(){var e={disabledGPS:!0},t={expires:G.portalExpiration};U.set(T,e,t)}function w(){var e=r(),t={propertyId:e.propertyId},n=P.Deferred();return P.ajax({url:S,type:"GET",dataType:"jsonp",data:t,async:!0,success:function(e){e.status?n.resolve(e):n.reject(e)},error:function(e){var t="Endpoint error. Unable to detect location by IP";b(t)}}),n.promise()}function _(e){var t=e.coords,n=r(),i={latitude:t.latitude,longitude:t.longitude,propertyId:n.propertyId,languageId:n.languageId},o=P.Deferred();return P.ajax({url:M,type:"GET",dataType:"jsonp",data:i,async:!0,success:function(e){e.status?o.resolve(e):o.reject(e)},error:function(e){var t="Endpoint error. Unable to find portal";b(t)}}),o.promise()}function x(){var e=P.Deferred();return j().then(function(t){e.resolve(t)},function(t){e.reject()}),e.promise()}function j(){var e={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},t=P.Deferred();return navigator.geolocation.getCurrentPosition(t.resolve,t.reject,e),t.promise()}function b(e){throw e||(e="End point error. Unable to detect location"),e}function I(e){return e.data.inPropertyRange?!0:(V.emit(A.outOfRange,e),p(e),!1)}function E(){return navigator.geolocation?!0:(V.emit(V.events.noGeolocation),!1)}function L(){var e=c();return"undefined"==typeof e||"undefined"==typeof e.disabledGPS?!1:e.disabledGPS?(V.emit(A.noUserCoordinates),!0):!1}function R(e){function t(){var e=P.Deferred(),t=P.Deferred();n().then(function(e){return t.resolve(e),t.promise()},function(n){return e.reject(),t.reject(n),t.promise()});var r=P.Deferred();return t.then(function(t){o().then(function(e){return r.resolve(e),r.promise()},function(t){return e.reject(),r.reject(t),r.promise()})}),r.then(function(t){a(t).then(function(t){h(!0),e.resolve(t)},function(){e.reject()})}),e.promise()}function n(){var e=P.Deferred();return w().then(function(t){p.emit(p.events.locationFound,t),I(t)?e.resolve(t):e.reject(t)},function(t){p.emit(A.locationUnknown,t),e.reject(t)}),e.promise()}function o(){var e=P.Deferred();return x().then(function(t){p.emit(A.userCoordinates,t),e.resolve(t)},function(t){y(),p.emit(A.noUserCoordinates),e.reject(t)}),e.promise()}function a(e){var t=P.Deferred();return _(e).then(function(e){e.data.inRange?(p.emit(A.portal,e),d(e),t.resolve(e)):(p.emit(A.outOfPortalRange,e),t.reject())},function(){p.emit(A.noPortal),t.reject()}),t.promise()}s(e.getOptions());var p=V=this;this.events=A,this.getOptions=function(){return r()},this.findPortal=function(){var e=P.Deferred(),n=this.getOptions();if(!n.canRedirect)return e.reject(),e.promise();if(this.isMute())return p.emit(A.mute),e.reject(),e.promise();if(!E()||L())return e.reject(),e.promise();if(this.emit(A.detectingIP),this.hasVisited()){var r=f();if(r)return p.emit(A.outOfRange,r),e.reject(),e.promise();var i=c(),o=i.info;return o?(p.emit(A.portal,o),e.resolve(o),e.promise()):t()}return t()},this.getData=function(){var e=null,t=c();return t&&t.info&&(e=t.info),e},this.hasVisited=function(){var e=i();if("string"==typeof e)throw"Unable to determine. Unknown property ID";var t=c(),n=f();if(t||n){var r=this.getOptions();if(n&&n.data.propertyId==e||t&&t.info.data.propertyId==e&&r.languageId==t.info.data.languageId)return!0;m()}return!1},this.isMute=function(){var e=i();if("string"==typeof e)throw"Unable to determine. Unknown property ID";var t=l();if(t){if(t.propId==e)return!0;m()}return!1},this.mute=function(e){if("string"==typeof i())throw"Missing current property ID";if("undefined"==typeof e||!e)return g();if("number"==typeof e)return g(e);throw"Invalid parameter to mute portal"},this.onPortal=function(e){if("undefined"==typeof e)throw"Missing property id";u(e)},this.getPortalId=function(){return i()},this.redirect=function(){var e=this.getData();if(!e)throw"Something went wrong";var t=r();"undefined"==typeof t.success||null===t.success?window.location="/"+e.data.redirectURL:t.success(e)},this.disableRedirectView=function(){return h(!1),this},this.isRedirectViewEnabled=function(){return v()}}var U=e("js-cookie"),C=e("events"),P=null,D="";const T="hebs_guestportal",k="hebs_guestportal_ip_geo",O="hebs_guestportal_mute",M="/json/guestportal.json",S="/json/userdistance.json";var G=null,V=null,A={detectingIP:"locating",locationFound:"locationFound",locationUnknown:"locationUnknown",outOfPortalRange:"outOfPortalRange",outOfRange:"outOfRange",portal:"portal",noPortal:"noPortal",noGeolocation:"noGeolocation",userCoordinates:"userCoordinates",noUserCoordinates:"noUserCoordinates",mute:"mute"};R.prototype=new C.EventEmitter,R.prototype.constructor=R,t.exports=R},{events:1,"js-cookie":2}],4:[function(e,t,n){function r(e){if("object"!=typeof e)throw"Missing settings";if(p={},"undefined"==typeof e.jQuery)throw"Missing jQuery";if(d=e.jQuery,p.jQuery=d,"undefined"==typeof e.languageId)throw"Missing language id";if(e.languageId.length?p.languageId=parseInt(e.languageId):p.languageId=null,"undefined"==typeof e.propertyId)throw"Missing property id";i(e.propertyId),p.propertyId=u(),"undefined"!=typeof e.success&&e.success&&(p.success=e.success),"undefined"!=typeof e.portalExpiration&&"number"==typeof e.portalExpiration?p.portalExpiration=a(e.portalExpiration):p.portalExpiration=.02,"undefined"!=typeof e.ipExpiration&&"number"==typeof e.ipExpiration?p.ipExpiration=a(e.ipExpiration):p.ipExpiration=.02,"undefined"!=typeof e.canRedirect&&"1"===e.canRedirect?p.canRedirect=!0:p.canRedirect=!1}function i(e){h=o(e)}function o(e){return e=e.length?parseInt(e):null}function s(){return p}function u(){return h}function a(e){var t=1440,n=e/t,n=n.toFixed(3);return parseFloat(n)}function c(){function e(){a.views.redirect.render()}function t(){a.model.redirect()}function n(e){a.model.mute(e)}function i(){a.model.disableRedirectView()}function o(){return a.model.isRedirectViewEnabled()}var u=["redirect"],a=this;this.views={},this.model=null,this.initialize=function(e){r(e),this.model=new l(this)},this.getViewTypes=function(){return u},this.registerRedirectView=function(e){var t=s();e.jQuery=d,e.languageId=t.languageId,e.propertyId=t.propertyId,e.ui="dialog",this.views.redirect=new f(this,e)},this.getOptions=function(){return s()},this.start=function(){this.model.findPortal().done(function(n){a.views.redirect&&o()?e():t()})},this.onPortal=function(e){this.initialize(e)},this.mutePortal=function(e){n(e)},this.redirectToPortal=function(){this.model&&(i(),t())},this.getPortalSlug=function(){var e=this.model.getData();return e.data.redirectURL}}var f=e("./RedirectView"),l=e("./Guestportal"),p=null,d=null,h="";t.exports=new c},{"./Guestportal":3,"./RedirectView":5}],5:[function(e,t,n){function r(e){if("object"!=typeof e)throw"Missing settings";if(f=e,h=e.jQuery,"undefined"==typeof e.el&&!e.el)throw"Missing modal selector";d=e.el,p="undefined"!=typeof e.bindTo&&e.bindTo?e.bindTo:"body","undefined"!=typeof e.template&&e.template&&(l=e.template),u(e)}function i(e){l=e}function o(e){var t="/"+e+v,n=h.Deferred();return h.ajax({url:t,type:"GET",dataType:"json",async:!0,success:function(e){e.status?n.resolve(e):n.reject(e)},error:function(e){var t="Endpoint error. Unable to fetch template/message not setup";s(t)}}),n.promise()}function s(e){throw e||(e="Unable to process guestportal redirect view"),e}function u(e){g.ui=e.ui,g.close=e.close,g["continue"]=e["continue"],g.stop=e.stop}function a(e){return"dialog"!=g.ui?!1:"undefined"!=typeof g.close&&g.close&&"undefined"!=typeof g["continue"]&&g["continue"]?!("undefined"==typeof g.stop||!g.stop):!1}function c(e,t){function n(e){var t=e.find(d);if(!a(t))throw"Invalid dialog template";h(p).append(e),u(t),t.show()}function u(e){e.find(g.close).on("click",v.close),e.find(g["continue"]).on("click",v["continue"]),e.find(g.stop).on("click",v.stop)}function c(){h(p).find("#"+m).remove()}var f=e;r(t);var v=this,y="<div></div>",w=h(y).attr("id",m);this.bindTo=p,this.el=d,this.render=function(){if(this.getTemplate())n(w.html(this.getTemplate()));else{var e=f.getPortalSlug();o(e).then(function(e){i(e.data.dialog),n(w.html(v.getTemplate()))},function(e){s(e.msg)})}},this.getTemplate=function(){return l},this.getOptions=function(){return t},this.close=function(){c(),f.mutePortal()},this.stop=function(){c(),f.mutePortal()},this["continue"]=function(){return c(),f.redirectToPortal(),!0}}var f=null,l=null,p=null,d=null,h=null;const v="/dialog.json",m="modal-portal-redirect";var g={ui:"modal",close:"","continue":"",stop:""};t.exports=c},{}],6:[function(e,t,n){window.Modules={},window.Modules.Guestportal=e("./GuestportalService")},{"./GuestportalService":4}]},{},[6]);